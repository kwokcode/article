# æŠ“åŒ…å·¥å…·CharlesåŸºæœ¬ç”¨æ³•

###å‰æ²¿ï¼š
å‘ç°äº†ä¸€æ¬¾æœ‰è¶£çš„appï¼Œå‘ç°æ˜¯httpsï¼Œå¯¼è‡´ä¸èƒ½çœ‹åˆ°å…¶æ•°æ®ç»“æ„å’ŒåŠ å¯†æ–¹å¼æ˜¯ä¸æ˜¯å¾ˆæ‰æ€¥å‘¢ï¼Ÿï¼Ÿï¼Ÿ
    æœ¬äººåšç§»åŠ¨ç«¯å¼€å‘å·²ç»æœ‰5å¹´çš„å†å²ï¼Œé‚£ä¹ˆåœ¨å¹³æ—¶çš„å¼€å‘ä¸­æœ‰æ²¡æœ‰å¥½ç”¨çš„æŠ“åŒ…è½¯ä»¶å‘¢ï¼Ÿæœ‰çš„ï¼Œé‚£å°±æ˜¯Charlesï¼ˆæœ¬äººè¯´ä¸€å£°æŠ±æ­‰ï¼Œæ— è®ºæ˜¯å¼€å‘iOSè¿˜æ˜¯Android éƒ½æ˜¯ä¸€ç›´ä½¿ç”¨çš„mac æ‰€ä»¥æˆ‘ä»…ä»…æ˜¯ä»‹ç»ä¸€ä¸‹mac çš„å·¥å…·ï¼‰

Charlesæ˜¯ä¸€æ¬¾Httpä»£ç†æœåŠ¡å™¨å’ŒHttpç›‘è§†å™¨ï¼Œå½“ç§»åŠ¨ç«¯åœ¨æ— çº¿ç½‘è¿æ¥ä¸­æŒ‰è¦æ±‚è®¾ç½®å¥½ä»£ç†æœåŠ¡å™¨ï¼Œä½¿æ‰€æœ‰å¯¹ç½‘ç»œçš„è¯·æ±‚éƒ½ç»è¿‡Charleså®¢æˆ·ç«¯æ¥è½¬å‘æ—¶ï¼ŒCharleså¯ä»¥ç›‘æ§è¿™ä¸ªå®¢æˆ·ç«¯å„ä¸ªç¨‹åºæ‰€æœ‰è¿æ¥äº’è”ç½‘çš„Httpé€šä¿¡ã€‚æ³¨ï¼šæœ¬äººè‡ªå·±å®è·µæŠ“http /https åè®®ï¼Œsocketæˆ‘æ²¡æœ‰æŠ“è¿‡ã€‚
    
ä¸€ã€å®‰è£…Charleså®¢æˆ·ç«¯
æ‰“å¼€æµè§ˆå™¨è®¿é—®Charleså®˜ç½‘ [é“¾æ¥](https://www.charlesproxy.com/)ï¼Œä¸‹è½½ç›¸åº”ç³»ç»Ÿçš„Charleså®‰è£…åŒ…ï¼Œç„¶åä¸€é”®å®‰è£…å³å¯ã€‚
![é’èŠ±ç“·å®˜ç½‘](https://upload-images.jianshu.io/upload_images/15063932-d6fed3bf53867c98.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


å½“ç„¶æ‚¨ä¹Ÿå¯ä»¥ä¸‹è½½æˆ‘æ›¾ç»ä½¿ç”¨çš„ç‰ˆæœ¬ï¼ˆå»ºè®®æ‚¨æ”¯æŒæ­£ç‰ˆï¼‰[ç ´è§£ç‰ˆæœ¬ä¸‹è½½é“¾æ¥](https://pan.baidu.com/s/1CgQqYjHSdFhH8EKTxb61Yg )å¯†ç :mxhb

Charlesæä¾›ä¸¤ç§æŸ¥çœ‹å°åŒ…çš„é¡µç­¾ï¼Œä¸€ä¸ªæ˜¯Structureï¼Œå¦ä¸€ä¸ªæ˜¯Sequenceï¼ŒStructureç”¨æ¥å°†è®¿é—®è¯·æ±‚æŒ‰è®¿é—®çš„åŸŸååˆ†ç±»ï¼ŒSequenceç”¨æ¥å°†è¯·æ±‚æŒ‰è®¿é—®çš„æ—¶é—´æ’åºã€‚ä»»ä½•ç¨‹åºéƒ½å¯ä»¥åœ¨Charlesä¸­çš„Structureçª—å£ä¸­çœ‹åˆ°è®¿é—®çš„åŸŸåã€‚
#ç›®å½•
1.1 Charlesä¸»è¦çš„åŠŸèƒ½
1.2 å°† Charles è®¾ç½®æˆç³»ç»Ÿä»£ç†
1.3 è¿‡æ»¤ç½‘ç»œè¯·æ±‚
1.4 æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ
1.5 ä¿®æ”¹ç½‘ç»œè¯·æ±‚å†…å®¹
1.6 ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹
1.7 æŠ“å–æ‰‹æœºAppç½‘ç»œè¯·æ±‚


###1.1Charlesä¸»è¦çš„åŠŸèƒ½
1.æˆªå–Httpã€Httpsç½‘ç»œè¯·æ±‚å†…å®¹

2.æ”¯æŒä¿®æ”¹ç½‘ç»œè¯·æ±‚å‚æ•°ï¼Œæ–¹ä¾¿è°ƒè¯•

3.æ”¯æŒç½‘ç»œè¯·æ±‚çš„æˆªå– å¹¶åŠ¨æ€ä¿®æ”¹

![ä¸»è¦çš„åŠŸèƒ½](https://upload-images.jianshu.io/upload_images/15063932-a807228c6181fa7f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


###1.2å°† Charles è®¾ç½®æˆç³»ç»Ÿä»£ç†
æˆ‘ä»¬åœ¨è°ƒè¯•ç§»åŠ¨APPæ—¶ï¼Œéœ€è¦æŠ“å–APPå‘é€çš„æ•°æ®åŒ…ï¼Œé¦–å…ˆè¿›è¡Œè®¾ç½®ï¼ŒProxy -> Proxy Settingsé»˜è®¤ç«¯å£æ˜¯8888ï¼Œæ ¹æ®å®é™…æƒ…å†µå¯ä¿®æ”¹ï¼ˆå»ºè®®ä¸è¦æ›´æ”¹ï¼Œå› ä¸ºåœ¨å·¥ä½œä¸­ä¼šæœ‰å¾ˆå¤šäººéœ€è¦é“¾æ¥æ‚¨çš„ç”µè„‘ï¼‰ã€‚
![ä»£ç†è®¾ç½®](https://upload-images.jianshu.io/upload_images/15063932-6db2aadba6663977.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![ç«¯å£å·](https://upload-images.jianshu.io/upload_images/15063932-e35206bf567e18a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è¿›è¡Œhttpsçš„æŠ“åŒ…
- 1.  åœ¨macä¸Šå®‰è£…è¯ä¹¦ 
help -> SSL Proxying -> install Charles Root Certificate 
![åœ¨macä¸Šå®‰è£…è¯ä¹¦ ](https://upload-images.jianshu.io/upload_images/15063932-a1f5ef89bb9f87b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


- 2.  åœ¨keychainä¸Šè¿›è¡Œè¯ä¹¦ä¿¡ä»»ï¼Œæ‰“å¼€keychain ç‚¹å‡»ğŸ” é”®å…¥keychain
![keychain](https://upload-images.jianshu.io/upload_images/15063932-541464e3901f2f75.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


- 3.  åœ¨keychainä¸­ ç‚¹å‡»login->Certificates,å³å‡»ï¼ˆä¸¤ä¸ªæ‰‹æŒ‡å¤´ç‚¹ä¸‹ï¼‰ï¼Œè¿›è¡Œä»»æ„æ¥æºä¿¡ä»»
![login->Certificates](https://upload-images.jianshu.io/upload_images/15063932-bc4582f67e9d3bf1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![ä»»æ„æ¥æºä¿¡ä»»](https://upload-images.jianshu.io/upload_images/15063932-5b766a4282389d0f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 4. å¯¼å‡ºè¯ä¹¦å¯¼å‡ºp.12æ–‡ä»¶ 
![p.12](https://upload-images.jianshu.io/upload_images/15063932-41196bd73d730f68.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 5.é€šè¿‡airdrop æˆ–è€…å…¶ä»–æ–¹å¼å®‰è£…åˆ°æ‰‹æœºä¸Šï¼Œæ³¨æ„è¿™è¿˜æ²¡æœ‰å®Œï¼Œéœ€è¦åœ¨settig general->about->Certificate Trust Settings è¿›è¡Œè¯ä¹¦çš„ä¿¡ä»»å¼€å¯ï¼Œå¦åˆ™ä¸èƒ½æŠ“https
![å®‰è£…æè¿°æ–‡ä»¶](https://upload-images.jianshu.io/upload_images/15063932-4d60c3edf6d9a25f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![settig general->about->Certificate Trust Settings](https://upload-images.jianshu.io/upload_images/15063932-bc064ad6ebd27262.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 6. åœ¨æ‰‹æœºä¸Šè®¾ç½®ç›¸å…³çš„ä»£ç†ï¼Œä¸»è¦æ­¤æ—¶éœ€è¦å…³é—­è‡ªå·±çš„vpnï¼Œå¦åˆ™æ²¡æœ‰åŠæ³•æŠ“åŒ…
![æ‰‹æœºä¸Šè®¾ç½®ç›¸å…³çš„ä»£ç†](https://upload-images.jianshu.io/upload_images/15063932-501789c3cf4669a3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ç°åœ¨å¤§åŠŸå‘Šæˆäº†å—ï¼Ÿå¦‚æœæŠ“httpçš„åŒ…æ—©å·²ç»å¤§åŠŸå‘Šæˆï¼Œä½†æ˜¯å¦‚æœæŠ“httpsçš„è¿˜æœ‰ä¸€æ­¥å‘¢ 
- 7. Proxy->SLL Proxy Settings 
![å¡«å†™host](https://upload-images.jianshu.io/upload_images/15063932-f9f57df08150aaaf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


###1.3 è¿‡æ»¤ç½‘ç»œè¯·æ±‚
- 1. åœ¨Filter æ ä¸­å¡«å…¥éœ€è¦è¿‡æ»¤å‡ºæ¥çš„å…³é”®å­—ï¼ˆå¯æ¨¡ç³Šæœç´¢ï¼‰
![è¿‡æ»¤ç½‘ç»œè¯·æ±‚](https://upload-images.jianshu.io/upload_images/15063932-df7672dc71296e19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 2. focus ä»…ä»…æ˜¯å…³æ³¨è‡ªå·±å…³æ³¨çš„
![focus](https://upload-images.jianshu.io/upload_images/15063932-f0ee6e76ae754588.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![focus2](https://upload-images.jianshu.io/upload_images/15063932-52bf59de524ba569.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)




###1.4 æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ
åœ¨ Charles çš„èœå•ä¸Šï¼Œé€‰æ‹©Proxy ->Throttle Setting->Enable Throttling
å¦‚æœæˆ‘ä»¬åªæƒ³æ¨¡æ‹ŸæŒ‡å®šç½‘ç«™çš„æ…¢é€Ÿç½‘ç»œï¼Œå¯ä»¥å†å‹¾é€‰ä¸Šå›¾ä¸­çš„ â€œOnly for selected hostsâ€ é¡¹å³å¯ã€‚
![Throttling](https://upload-images.jianshu.io/upload_images/15063932-34657f72c5879433.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

###1.5 ä¿®æ”¹ç½‘ç»œè¯·æ±‚å†…å®¹
![ä¿®æ”¹ç½‘ç»œè¯·æ±‚å†…å®¹](https://upload-images.jianshu.io/upload_images/15063932-6d4d4aacb50f7892.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

###1.6 ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹
é¦–å…ˆ è¦ä¿è¯æ˜¯å¼€å¯è¯·æ±‚æ–­ç‚¹æ˜¯æ‰“å¼€çš„
é€‰æ‹©è¦ä¿®æ”¹çš„æ¥å£å†…å®¹ ï¼Œå‹¾é€‰Breakpoints
æ‰“å¼€é’èŠ±ç“·åˆ‡æ¢æˆç»“æ„é¡µé¢,åˆ‡æ¢æˆStructure
![ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹](https://upload-images.jianshu.io/upload_images/15063932-f3bd48f9c705f5d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹2](https://upload-images.jianshu.io/upload_images/15063932-afc8b99445ab2603.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)



###1.7 æŠ“å–ç›¸å…³çš„æ•°æ®
![æŠ“å–ç›¸å…³çš„æ•°æ®](https://upload-images.jianshu.io/upload_images/15063932-1f0a5c490513592f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![æŠ“å–ç›¸å…³çš„æ•°æ®2](https://upload-images.jianshu.io/upload_images/15063932-5306900b831b1de4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
